# TenkaCloud プロジェクト概要

> 初めてこのリポジトリを見る方のための入門ガイド

## TenkaCloud とは

TenkaCloud は、クラウド技術者のための **常設・オープンソースの競技プラットフォーム** です。

AWS GameDay のような「クラウドインフラ構築の競技イベント」を、いつでも・どこでも・誰でも開催・参加できるようにした OSS プラットフォームです。

### なぜ作ったのか

- **AWS GameDay は素晴らしいが、開催機会が限られている**
- 企業や教育機関が独自に競技イベントを開催したい需要がある
- クラウド学習の実践的な場が不足している
- 既存ソリューションは OSS ではないか、機能が限定的

### 何ができるか

```
┌─────────────────────────────────────────────────────────────┐
│                    TenkaCloud でできること                    │
├─────────────────────────────────────────────────────────────┤
│  1. 問題を作る    → AI 支援で自動生成、手動作成も可能         │
│  2. 競技を開催    → チーム対戦、個人戦、時間制限付きバトル     │
│  3. 自動採点      → インフラ構築を自動検証、スコアリング       │
│  4. 学習・分析    → リーダーボード、詳細フィードバック         │
└─────────────────────────────────────────────────────────────┘
```

## アーキテクチャ概要

TenkaCloud は **マルチテナント SaaS** として設計されています。

```
                              TenkaCloud Platform
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │                     Control Plane                            │   │
│   │   ─────────────────────────────────────────────────────────   │   │
│   │   テナント登録 │ ユーザー管理 │ プロビジョニング │ 課金      │   │
│   │   （すべてのテナントで共有されるプラットフォーム機能）        │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                              │                                      │
│              ┌───────────────┼───────────────┐                      │
│              ▼               ▼               ▼                      │
│   ┌──────────────┐ ┌──────────────┐ ┌──────────────┐               │
│   │  Tenant A    │ │  Tenant B    │ │  Tenant C    │  ...          │
│   │  ──────────  │ │  ──────────  │ │  ──────────  │               │
│   │  バトル管理  │ │  バトル管理  │ │  バトル管理  │               │
│   │  問題管理    │ │  問題管理    │ │  問題管理    │               │
│   │  採点        │ │  採点        │ │  採点        │               │
│   │  リーダー    │ │  リーダー    │ │  リーダー    │               │
│   │  ボード      │ │  ボード      │ │  ボード      │               │
│   └──────────────┘ └──────────────┘ └──────────────┘               │
│       Application Plane（テナントごとに分離）                       │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Control Plane と Application Plane

| 層 | 役割 | 例 |
|----|------|-----|
| **Control Plane** | プラットフォーム全体の管理 | テナント登録、認証、課金 |
| **Application Plane** | テナント固有のビジネスロジック | バトル開催、問題管理、採点 |

この分離により、各テナント（企業・教育機関など）のデータとリソースが安全に分離されます。

### フロントエンド構成

```
┌────────────────────────────────────────────────────────────┐
│                      2 つの UI                              │
├────────────────────────────────────────────────────────────┤
│                                                            │
│  Control Plane UI (localhost:13000)                        │
│  ─────────────────────────────────                         │
│  ・プラットフォーム管理者向け                               │
│  ・テナント一覧・管理                                       │
│  ・システム設定                                             │
│                                                            │
│  Application Plane UI (localhost:13001)                    │
│  ─────────────────────────────────────                     │
│  ・テナント管理者・競技者向け                               │
│  ・バトル参加・問題への挑戦                                 │
│  ・リーダーボード閲覧                                       │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

### バックエンド構成

マイクロサービスアーキテクチャを採用しています。

```
backend/services/
├── control-plane/           # 共有サービス
│   ├── tenant-management    → テナント CRUD
│   ├── registration         → 新規テナント登録フロー
│   ├── provisioning         → AWS リソース自動作成
│   └── user-management      → ユーザー管理
│
├── application-plane/       # テナント固有サービス
│   ├── problem-service      → 問題の作成・編集・AI 生成
│   ├── battle-service       → バトルセッション管理
│   ├── scoring-service      → 自動採点
│   └── leaderboard-service  → ランキング・統計
│
└── shared/                  # 共有ライブラリ
    ├── dynamodb             → DynamoDB リポジトリ層
    └── cloud-abstraction    → マルチクラウド対応の抽象化
```

## 用語集（Ubiquitous Language）

プロジェクト全体で統一して使用する用語です。

| 用語 | 説明 |
|------|------|
| **Tenant** | TenkaCloud を利用する組織・企業単位。1 つのテナントに複数のユーザーが所属 |
| **Control Plane** | テナント管理・認証を担う共有プラットフォーム |
| **Application Plane** | テナント固有のビジネスロジックを実行するサービス群 |
| **Battle** | クラウド構築の競技セッション。時間制限あり |
| **Participant** | バトルに参加する競技者 |
| **Problem** | クラウドインフラ構築の課題。難易度・制限時間・採点基準を持つ |
| **Scoring** | 構築されたインフラを自動検証してスコアを算出 |

## 技術スタック

| カテゴリ | 技術 |
|----------|------|
| フロントエンド | Next.js 16 (App Router), TypeScript, Tailwind CSS |
| バックエンド | Bun, Hono, TypeScript |
| データベース | DynamoDB (Single-Table Design) |
| 認証 | Auth0, NextAuth.js |
| インフラ | Docker, LocalStack, Terraform |
| テスト | Vitest, Playwright |
| AI | Claude API (MCP 統合) |

## ローカル環境で試す

```bash
# 1. クローン
git clone --recurse-submodules https://github.com/susumutomita/TenkaCloud.git
cd TenkaCloud

# 2. 依存関係インストール
bun install

# 3. 起動（Docker Desktop が必要）
make start
```

起動後、以下の URL にアクセスできます。

- Control Plane: http://localhost:13000
- Application Plane: http://localhost:13001

詳細は [クイックスタートガイド](./QUICKSTART.md) を参照。

## 次に読むドキュメント

| 目的 | ドキュメント |
|------|-------------|
| 環境構築したい | [QUICKSTART.md](./QUICKSTART.md) |
| 詳細な設計を知りたい | [architecture/architecture.md](./architecture/architecture.md) |
| 開発に参加したい | [CONTRIBUTING.md](./CONTRIBUTING.md) |
| AI エージェントで開発 | [CLAUDE.md](../CLAUDE.md) |

## プロジェクトの現状

TenkaCloud は積極的に開発中です。現在の状況は以下の通りです。

- **動作するもの**: テナント管理、問題管理 (CRUD + AI 生成)、ローカル開発環境
- **開発中**: バトルセッション、採点システム、リーダーボード
- **今後**: 本番環境デプロイ、マルチクラウド対応、観戦モード

コントリビューションを歓迎します。
