generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum TenantStatus {
  ACTIVE
  SUSPENDED
  ARCHIVED
}

enum TenantTier {
  FREE
  PRO
  ENTERPRISE
}

enum IsolationModel {
  POOL
  SILO
}

enum ComputeType {
  KUBERNETES
  SERVERLESS
}

enum ProvisioningStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  FAILED
}

model Tenant {
  id                 String             @id @default(uuid())
  name               String
  slug               String             @unique
  status             TenantStatus       @default(ACTIVE)
  tier               TenantTier         @default(FREE)
  adminEmail         String             @unique
  adminName          String?
  region             String             @default("ap-northeast-1")
  isolationModel     IsolationModel     @default(POOL)
  computeType        ComputeType        @default(SERVERLESS)
  provisioningStatus ProvisioningStatus @default(PENDING)
  createdAt          DateTime           @default(now())
  updatedAt          DateTime           @updatedAt

  @@index([status])
  @@index([adminEmail])
  @@index([slug])
  @@map("tenants")
}
